# Лента новостей — Техническое задание (React + Redux‑Saga, Vite)

Необходимо реализовать упрощённый аналог подгрузки новостей «ВКонтакте». При открытии страницы отображаются первые записи, далее пользователь может дозагружать предыдущие.

## Цель задания

Закрепить работу с React, Redux‑Saga и асинхронной дозагрузкой, обработкой состояний загрузки/ошибок/окончания данных, а также реализацией **автоповторов** запросов при ошибках.

## Инструменты

* **Сборщик:** Vite.
* **Состояние:** Redux / @reduxjs/toolkit (по желанию) + Redux‑Saga.

## API

Бэкенд находится в каталоге `backend`.

* Первичная загрузка: `GET http://localhost:7070/api/news`
  Возвращает массив последних новостей (до 5 элементов).
* Дозагрузка от последней: `GET http://localhost:7070/api/news?lastSeenId=X`
  где `X` — id последней загруженной новости.

Если новости закончились, сервер вернёт **пустой массив** или массив **меньше 5** элементов.

## Требования к функционалу

1. **Первичная загрузка**

   * При открытии страницы запрашиваются первые 5 новостей.
   * Новости выводятся карточками.

   ![](./assets/load-more.png)

2. **Дозагрузка новостей**

   * Под списком есть кнопка **«К предыдущим записям»**.
   * По клику загружаются ещё 5 и добавляются в конец списка.
   * Пока идёт запрос — показывается индикатор.

   ![](./assets/loading.png)

3. **Поведение при ошибках**

   * Пользователя **не уведомлять** сообщениями/тостами.
   * Выполнять **автоповторы каждые 3 секунды**, пока запрос не завершится успешно (для текущего действия: первичная загрузка или дозагрузка).

4. **Окончание новостей**

   * Если пришло `< 5` элементов (включая `0`): считать, что новости закончились.
   * Снизу **не показывать** ни кнопку, ни индикатор.

   ![](./assets/finish.png)

5. **Состав карточки новости (минимум)**

   * Время в формате: **день, месяц, часы:минуты** (например, `12 янв, 14:35`).
   * Текст сообщения.
   * Количество лайков.
   * Количество комментариев.
   * Количество репостов.
   * Количество просмотров.
   * (Опционально) изображения и ссылки внутри карточки.

## Требования к UI

* Кнопка **«К предыдущим записям»** для дозагрузки.
* Индикатор загрузки во время запросов.
* Карточки ровно соответствуют данным с сервера (правильный парсинг и форматирование дат/счётчиков).

## Ограничения

* Создание/редактирование/удаление записей не требуется.
* При ошибках — только автоповторы, без пользовательских уведомлений.
* Не использовать сторонние data‑fetching библиотеки (React Query, SWR и т. п.).

## Реализация (Vite)

1. Создайте проект:

   ```bash
   npm create vite@latest news-feed -- --template react
   cd news-feed
   npm i
   npm i redux react-redux @reduxjs/toolkit redux-saga
   ```
2. Запустите бэкенд из каталога `backend` (см. его README):

   ```bash
   npm i
   npm start
   ```
3. Запустите фронтенд:

   ```bash
   npm run dev
   ```

## Чек‑лист самопроверки

### Архитектура

* [ ] В Redux хранятся: массив новостей, флаги `loading`/`error` (или статус), `hasMore`/признак окончания.
* [ ] Экшены: `fetchNewsRequested` / `fetchNewsSucceeded` / `fetchNewsFailed` для первичной загрузки и дозагрузки.
* [ ] `lastSeenId` корректно вычисляется из **последней** новости в списке.
* [ ] Для запросов используются эффекты `call`, `put`, `delay`, `takeLatest`/`takeLeading` (обоснованный выбор).
* [ ] Реализованы **автоповторы каждые 3 сек.** при ошибках (без UI‑ошибок для пользователя).

### Маршруты и экраны

* [ ] На главной сразу видны первые 5 новостей (или меньше, если у сервера меньше данных).
* [ ] По клику на «К предыдущим записям» приходит ещё 5 и добавляются в конец списка.
* [ ] При окончании ленты (массив пуст или < 5) кнопка дозагрузки и индикатор **исчезают**.

### UI‑состояния

* [ ] Индикатор загрузки отображается **только** во время сетевого запроса.
* [ ] Кнопка «К предыдущим записям» видна **только** когда есть, что догружать.
* [ ] Дата форматируется в виде `дд аббревиатура_месяца, чч:мм` (исп. `Intl.DateTimeFormat`).
* [ ] Карточка содержит: время, текст, лайки, комментарии, репосты, просмотры (и, по возможности, изображения/ссылки).

### Качество кода

* [ ] Компоненты разбиты по назначению (контейнер ленты, карточка новости, кнопка дозагрузки, спиннер).
* [ ] Нет дублирования в саге/редьюсере; переиспользуются общие части.
* [ ] Обработаны граничные случаи: пустой ответ, короткий ответ (< 5), повторные клики.
* [ ] Код читаемый; имена переменных и функций осмысленные.

### Дополнительные задания (по желанию)

* [ ] Бесконечный скролл вместо кнопки.